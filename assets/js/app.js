function Popup(e){var t=this,i=document.createElement("div"),r=document.createElement("div"),o=document.createElement("div"),n=document.createElement("div");if(document.body.insertBefore(i,document.body.children[0]),i.className="overlay",document.body.insertBefore(r,document.body.children[1]),r.className="modal",r.insertBefore(o,r.children[0]),o.className="close",r.insertBefore(n,r.children[1]),n.className="content",this.overlay=document.querySelector(".overlay"),this.modal=document.querySelector(".modal"),this.modalContent=document.querySelector(".modal .content"),this.btnClose=document.querySelector(".modal .close"),this.resize=function(){var e=document.querySelector("body").offsetHeight;t.overlay.style.height=e+"px"},t.resize(),window.onresize=t.resize,this.trigger=document.querySelectorAll(e.trigger),this.open=function(i){void 0!==e.content&&(i=document.querySelector(e.content).innerHTML);var r=document.documentElement.clientHeight;t.modal.style.top=r/2+"px",t.modalContent.innerHTML=i,t.overlay.classList.add("showed"),t.modal.classList.add("showed")},this.close=function(){t.overlay.classList.remove("showed"),t.modal.classList.remove("showed"),t.modal.style.top=0},void 0!==e.trigger)for(var s=0;s<this.trigger.length;s++)this.trigger[s].addEventListener("click",function(e){if(e.preventDefault(),this.hasAttribute("data-popup")){var i=this.getAttribute("data-popup"),r=document.querySelector(i);t.open(r.innerHTML)}t.open()});t.btnClose.onclick=t.close,t.overlay.onclick=t.close}var draw=function(){var e=!0;return{init:function(t){for(var i=$(t.svg),r=this,o=1;o<=i.length;o++)r.initSvg(o);$(document).on("scroll",function(){var i=$(t.block).offset().top;$(this).scrollTop()>=i&&e&&(r.animate(1),e=!1)})},initSvg:function(e){e=e||" ";var t=$("#draw-svg-"+e),i=t.prev(),r=this;return t.drawsvg({duration:600,easing:"linear",callback:function(){t.find("path").css({fillOpacity:1}),setTimeout(function(){i.addClass("active")},100),r.animate(++e)}})},animate:function(e){this.initSvg(e).drawsvg("animate")}}}();$(function(){$(".work__svg-bg").length&&draw.init({svg:".work__svg-bg",block:".work"})});var slider=function(){var e=0,t=!0;return{init:function(e){var t=this;e.dots&&t.createDots(),e.auto&&t.autoSwitch(e.duration),$(".slider__arr").on("click",function(i){i.preventDefault();var r=$(this),o=r.closest(".slider").find(".slider__item"),n=o.filter(".active"),s=n.next(),l=n.prev(),a=o.first(),c=o.last();t.clearTimer(e.duration),r.hasClass("slider__arr-next")?s.length?t.moveSlide(s,"forward"):t.moveSlide(a,"forward"):l.length?t.moveSlide(l,"backward"):t.moveSlide(c,"backward")}),$(".slider__dots-link").on("click",function(i){i.preventDefault();var r=$(this),o=r.closest(".slider__dots").find(".slider__dots-item").filter(".active"),n=r.closest(".slider__dots-item").index(),s=o.index()<n?"forward":"backward",l=r.closest(".slider").find(".slider__item").eq(n);t.clearTimer(e.duration),t.moveSlide(l,s)})},moveSlide:function(e,i){var r=this,o=e.closest(".slider"),n=o.find(".slider__item"),s=n.filter(".active"),l=n.width(),a=0,c=0;if(t){t=!1,"forward"===i?(a=l,c=-l):"backward"===i&&(a=-l,c=l),e.css("left",a).addClass("inslide");var d=n.filter(".inslide");s.animate({left:c},500),d.animate({left:0},500,function(){var e=$(this);n.css("left",0).removeClass("active"),e.toggleClass("inslide active"),r.setActiveDot(o.find(".slider__dots")),t=!0})}},createDots:function(){var e=this;$(".slider").each(function(){for(var t=$(this),i=t.find(".slider__item"),r=t.find(".slider__dots"),o=0;o<i.length;o++)r.append('<li class="slider__dots-item ">  <a class="slider__dots-link" href="#"></a>  </li>');e.setActiveDot(r)})},setActiveDot:function(e){var t=e.closest(".slider__wrap").find(".slider__item");e.find(".slider__dots-item").eq(t.filter(".active").index()).addClass("active").siblings().removeClass("active")},autoSwitch:function(t){var i=this,t=t||5e3;e=setInterval(function(){var e=$(".slider__list .slider__item"),t=e.filter(".active").next(),r=e.first();t.length?i.moveSlide(t,"forward"):i.moveSlide(r,"forward")},t)},clearTimer:function(t){e&&(clearInterval(e),this.autoSwitch(t))}}}();".slider".length&&slider.init({dots:!0,auto:!0}),$(".slider__item").equalHeights(),$(document).scroll(function(){var e=$(this).scrollTop(),t=$("#js-header").height(),i=$(".top");e>t?i.addClass("active"):i.removeClass("active")}),$('a[href^="#js"]').on("click",function(e){e.preventDefault();var t=$(this).attr("href");$("html, body").animate({scrollTop:$(t).offset().top},"slow","swing")}),$(".hamburger").on("click",function(e){e.preventDefault();var t=$(this),i=t.attr("href");$(i).slideToggle(400,function(){var e=$(this);"none"===e.css("display")&&e.removeAttr("style")}),t.toggleClass("is-active")}),$(document).on("click",function(e){var t=$(e.target),i=$(".nav__list");t.closest(".nav").length||(i.slideUp(400,function(){var e=$(this);"none"===e.css("display")&&e.removeAttr("style")}),$(".hamburger").removeClass("is-active"))});var popup=new Popup({content:".header-mid__right",trigger:".section__bottom .btn"});!function(){for(var e=document.querySelectorAll(".section__bottom .btn"),t=0;t<e.length;t++)e[t].onclick=function(e){e.preventDefault();var t=this.innerHTML;document.querySelector(".form__title").innerHTML=t}}(),$("body").on("submit",".form",function(e){e.preventDefault();for(var t=$(this),i=!1,r=t.find(".input"),o=0;o<r.length;o++)r[o].value||(i=!0);i?alert("Заполните все поля"):$.ajax({type:"POST",url:"/mail.php",data:t.serialize()}).done(function(){popup.close(),setTimeout(function(){alert("Сообщение отправлено"),t.trigger("reset")},800)})});
//# sourceMappingURL=app.js.map
